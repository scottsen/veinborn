# Crafting Recipe Definitions
#
# The core of Brogue's unique hook: turn mined ore into equipment
#
# Design Goals:
# - Ore properties → equipment stats (SWG-style quality matters!)
# - Simple recipes (ore type + quantity → item)
# - Clear stat formulas (hardness → damage, etc.)
# - Tiered progression (copper → iron → mithril → adamantite)
#
# Stat Formula Variables:
# - hardness: 0-100 (weapon damage, armor defense)
# - conductivity: 0-100 (magic power, spell efficiency)
# - malleability: 0-100 (durability, repair ease)
# - purity: 0-100 (quality multiplier - affects ALL stats)
# - density: 0-100 (weight, encumbrance)
#
# Formula Syntax:
# - "hardness * 0.1" = hardness value * 0.1
# - "avg(hardness, purity)" = average of hardness and purity
# - "purity / 20" = purity divided by 20
# - Results are rounded to nearest integer

schema_version: 1.0

# =============================================================================
# WEAPONS - Offense-focused equipment
# =============================================================================
weapons:
  copper_dagger:
    display_name: "Copper Dagger"
    description: "A small blade forged from copper ore"
    symbol: ")"
    color: "copper"
    item_type: "weapon"
    equipment_slot: "weapon"

    # Recipe requirements
    requirements:
      ore_type: "copper"
      ore_count: 1
      min_floor: 1

    # Stat formulas (based on ore properties)
    stat_formulas:
      attack_bonus: "hardness * 0.05 + purity * 0.02"  # 2-4 for copper (20-50 range)
      defense_bonus: 0
      durability: "malleability * 0.5"  # 10-25 for copper
      weight: "density * 0.02"  # 0.4-1.0 for copper

    tags: ["weapon", "starter", "light", "copper_tier"]

  copper_sword:
    display_name: "Copper Sword"
    description: "A balanced blade forged from copper ore"
    symbol: ")"
    color: "copper"
    item_type: "weapon"
    equipment_slot: "weapon"

    requirements:
      ore_type: "copper"
      ore_count: 2
      min_floor: 1

    stat_formulas:
      attack_bonus: "hardness * 0.08 + purity * 0.03"  # 3-6 for copper
      defense_bonus: "malleability * 0.02"  # 0-1 for copper
      durability: "malleability * 0.6"  # 12-30 for copper
      weight: "density * 0.04"  # 0.8-2.0 for copper

    tags: ["weapon", "starter", "copper_tier"]

  iron_sword:
    display_name: "Iron Sword"
    description: "A reliable blade forged from iron ore"
    symbol: ")"
    color: "gray"
    item_type: "weapon"
    equipment_slot: "weapon"

    requirements:
      ore_type: "iron"
      ore_count: 2
      min_floor: 4

    stat_formulas:
      attack_bonus: "hardness * 0.1 + purity * 0.05"  # 5-11 for iron (40-70 range)
      defense_bonus: "malleability * 0.03"  # 1-2 for iron
      durability: "malleability * 0.8"  # 32-56 for iron
      weight: "density * 0.05"  # 2.0-3.5 for iron

    tags: ["weapon", "mid_tier", "iron_tier"]

  iron_battle_axe:
    display_name: "Iron Battle Axe"
    description: "A heavy cleaving weapon forged from iron ore"
    symbol: ")"
    color: "gray"
    item_type: "weapon"
    equipment_slot: "weapon"

    requirements:
      ore_type: "iron"
      ore_count: 3
      min_floor: 5

    stat_formulas:
      attack_bonus: "hardness * 0.12 + purity * 0.06"  # 7-13 for iron
      defense_bonus: -1  # Fixed penalty for heavy weapon
      durability: "malleability * 0.7"  # 28-49 for iron
      weight: "density * 0.08"  # 3.2-5.6 for iron

    tags: ["weapon", "mid_tier", "heavy", "two_handed", "iron_tier"]

  mithril_sword:
    display_name: "Mithril Sword"
    description: "An elegant blade forged from legendary mithril"
    symbol: ")"
    color: "blue"
    item_type: "weapon"
    equipment_slot: "weapon"

    requirements:
      ore_type: "mithril"
      ore_count: 2
      min_floor: 7

    stat_formulas:
      attack_bonus: "hardness * 0.15 + purity * 0.08"  # 12-21 for mithril (60-90 range)
      defense_bonus: "malleability * 0.05"  # 3-4 for mithril
      durability: "malleability * 1.0"  # 60-90 for mithril
      weight: "density * 0.03"  # 1.8-2.7 (lighter than iron!)

    tags: ["weapon", "high_tier", "magical", "mithril_tier"]

  adamantite_greatsword:
    display_name: "Adamantite Greatsword"
    description: "The ultimate blade forged from adamantite"
    symbol: ")"
    color: "purple"
    item_type: "weapon"
    equipment_slot: "weapon"

    requirements:
      ore_type: "adamantite"
      ore_count: 3
      min_floor: 10

    stat_formulas:
      attack_bonus: "hardness * 0.2 + purity * 0.1"  # 24-36 for adamantite (80-100 range)
      defense_bonus: "malleability * 0.06"  # 4-6 for adamantite
      durability: "malleability * 1.2"  # 96-120 for adamantite
      weight: "density * 0.06"  # 4.8-6.0 for adamantite

    tags: ["weapon", "legendary", "adamantite_tier"]

# =============================================================================
# ARMOR - Defense-focused equipment
# =============================================================================
armor:
  copper_chestplate:
    display_name: "Copper Chestplate"
    description: "Basic armor forged from copper ore"
    symbol: "["
    color: "copper"
    item_type: "armor"
    equipment_slot: "armor"

    requirements:
      ore_type: "copper"
      ore_count: 3
      min_floor: 1

    stat_formulas:
      attack_bonus: 0
      defense_bonus: "hardness * 0.06 + purity * 0.02"  # 1-3 for copper
      durability: "malleability * 0.8"  # 16-40 for copper
      weight: "density * 0.1"  # 2.0-5.0 for copper

    tags: ["armor", "starter", "heavy", "copper_tier"]

  iron_chestplate:
    display_name: "Iron Chestplate"
    description: "Reliable armor forged from iron ore"
    symbol: "["
    color: "gray"
    item_type: "armor"
    equipment_slot: "armor"

    requirements:
      ore_type: "iron"
      ore_count: 3
      min_floor: 4

    stat_formulas:
      attack_bonus: 0
      defense_bonus: "hardness * 0.1 + purity * 0.04"  # 5-10 for iron
      durability: "malleability * 1.2"  # 48-84 for iron
      weight: "density * 0.12"  # 4.8-8.4 for iron

    tags: ["armor", "mid_tier", "heavy", "iron_tier"]

  mithril_chestplate:
    display_name: "Mithril Chestplate"
    description: "Light yet strong armor forged from mithril"
    symbol: "["
    color: "blue"
    item_type: "armor"
    equipment_slot: "armor"

    requirements:
      ore_type: "mithril"
      ore_count: 3
      min_floor: 7

    stat_formulas:
      attack_bonus: 0
      defense_bonus: "hardness * 0.15 + purity * 0.06"  # 12-19 for mithril
      durability: "malleability * 1.5"  # 90-135 for mithril
      weight: "density * 0.08"  # 4.8-7.2 (lighter than iron!)

    tags: ["armor", "high_tier", "magical", "mithril_tier"]

  adamantite_plate:
    display_name: "Adamantite Plate Armor"
    description: "The ultimate armor forged from adamantite"
    symbol: "["
    color: "purple"
    item_type: "armor"
    equipment_slot: "armor"

    requirements:
      ore_type: "adamantite"
      ore_count: 4
      min_floor: 10

    stat_formulas:
      attack_bonus: 0
      defense_bonus: "hardness * 0.25 + purity * 0.1"  # 28-42 for adamantite
      durability: "malleability * 2.0"  # 160-200 for adamantite
      weight: "density * 0.1"  # 8.0-10.0 for adamantite

    tags: ["armor", "legendary", "heavy", "adamantite_tier"]

# =============================================================================
# CRAFTING MECHANICS
# =============================================================================
crafting_rules:
  # Ore selection rules
  ore_selection:
    mode: "player_choice"  # Player selects which ore to use from inventory
    quality_visible: true  # Player can see ore properties before crafting

  # Stat calculation
  stat_calculation:
    rounding: "nearest"  # Round to nearest integer
    min_stat: 1  # Minimum stat value (even for terrible ore)
    purity_multiplier: true  # Purity affects all stats

  # Crafting cost
  cost:
    turns: 1  # Crafting is instant (for now)
    consumable: true  # Ore is consumed on craft

  # Quality tiers (for display/sorting)
  quality_tiers:
    poor: [0, 30]      # Grey
    common: [31, 50]   # White
    uncommon: [51, 70] # Green
    rare: [71, 85]     # Blue
    epic: [86, 95]     # Purple
    legendary: [96, 100]  # Orange

# =============================================================================
# FORGE REQUIREMENTS
# =============================================================================
forge_requirements:
  # What forges can craft
  basic_forge:
    can_craft:
      - "copper_dagger"
      - "copper_sword"
      - "copper_chestplate"
    min_floor: 1
    description: "A simple forge for working copper"

  iron_forge:
    can_craft:
      - "copper_dagger"
      - "copper_sword"
      - "copper_chestplate"
      - "iron_sword"
      - "iron_battle_axe"
      - "iron_chestplate"
    min_floor: 4
    description: "A proper forge for iron and copper"

  master_forge:
    can_craft: "all"  # Can craft everything
    min_floor: 7
    description: "A master forge capable of working any ore"
